var firebaseConfig={apiKey:"AIzaSyB5wG1zkWlxpaL3Ofs1AWkDvjXehQIp_mI",authDomain:"xfz1-32ccc.firebaseapp.com",databaseURL:"https://xfz1-32ccc.firebaseio.com",projectId:"xfz1-32ccc",storageBucket:"xfz1-32ccc.appspot.com",messagingSenderId:"501437697604",appId:"1:501437697604:web:57e443d3eef2d6d1"};function News(){this.storage=firebase.storage()}firebase.initializeApp(firebaseConfig),News.prototype.initUditor=function(){var a=this,t=window.wangEditor;window.editor=new t("#editor"),window.editor.customConfig.customUploadImg=function(t,e){for(var n=0;n<t.length;n++){var o=a.storage.ref("news/"+Math.random().toString(36).substr(2)).put(t[n]);o.on("state_changed",function(t){},function(t){window.messageBox.showError(t.code)},function(){o.snapshot.ref.getDownloadURL().then(function(t){e(t)})})}},window.editor.create()},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenUploadFileEvent2=function(){var o=this,a=$("#thumbnail-btn");a.change(function(){var t=a[0].files[0],e=o.storage.ref("news/"+t.name).put(t);o.progressGroup.show();var n=$(".progress-bar");n.css({width:"0%"}),n.text("0"),e.on("state_changed",function(t){var e=(t.bytesTransferred/t.totalBytes*100).toFixed(0)+"%";n.css({width:e}),n.text(e)},function(t){window.messageBox.showError(t.code)},function(){e.snapshot.ref.getDownloadURL().then(function(t){$("#progress-group").hide(),$("#thumbnail-form").val(t),console.log(t)})})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$("input[name='title']").val(),n=$("select[name='category']").val(),o=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),i=window.editor.txt.html();xfzajax.post({url:"/cms/write_news/",data:{title:e,category:n,desc:o,thumbnail:a,content:i},success:function(t){200===t.code&&xfzalert.alertSuccess("新聞發佈成功",function(){window.location.reload()})}})})},News.prototype.run=function(){this.listenUploadFileEvent2(),this.initUditor(),this.listenSubmitEvent()},$(document).ready(function(){var t=new News;t.progressGroup=$("#progress-group"),t.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJhcHBJZCIsIk5ld3MiLCJ0aGlzIiwic3RvcmFnZSIsImZpcmViYXNlIiwiaW5pdGlhbGl6ZUFwcCIsInByb3RvdHlwZSIsImluaXRVZGl0b3IiLCJzZWxmIiwiRSIsIndpbmRvdyIsIndhbmdFZGl0b3IiLCJlZGl0b3IiLCJjdXN0b21Db25maWciLCJjdXN0b21VcGxvYWRJbWciLCJmaWxlcyIsImluc2VydCIsImkiLCJsZW5ndGgiLCJ0YXNrIiwicmVmIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwicHV0Iiwib24iLCJzbmFwc2hvdCIsImVycm9yIiwibWVzc2FnZUJveCIsInNob3dFcnJvciIsImNvZGUiLCJnZXREb3dubG9hZFVSTCIsInRoZW4iLCJkb3dubG9hZFVSTCIsImNyZWF0ZSIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidmFsIiwibGlzdGVuVXBsb2FkRmlsZUV2ZW50MiIsIm5hbWUiLCJwcm9ncmVzc0dyb3VwIiwic2hvdyIsInByb2dyZXNzQmFyIiwiY3NzIiwid2lkdGgiLCJ0ZXh0IiwicGVyY2VudFRleHQiLCJieXRlc1RyYW5zZmVycmVkIiwidG90YWxCeXRlcyIsInRvRml4ZWQiLCJoaWRlIiwiY29uc29sZSIsImxvZyIsImxpc3RlblN1Ym1pdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwidHh0IiwiaHRtbCIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJydW4iLCJkb2N1bWVudCIsInJlYWR5IiwibmV3cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsZUFBaUIsQ0FDakJDLE9BQVEsMENBQ1JDLFdBQVksNkJBQ1pDLFlBQWEsb0NBQ2JDLFVBQVcsYUFDWEMsY0FBZSx5QkFDZkMsa0JBQW1CLGVBQ25CQyxNQUFPLHVDQU1YLFNBQVNDLE9BQ0xDLEtBQUtDLFFBQVVDLFNBQVNELFVBSjVCQyxTQUFTQyxjQUFjWixnQkFPdkJRLEtBQUtLLFVBQVVDLFdBQWEsV0FDeEIsSUFBSUMsRUFBT04sS0FDUE8sRUFBSUMsT0FBT0MsV0FDZkQsT0FBT0UsT0FBUyxJQUFJSCxFQUFFLFdBRXRCQyxPQUFPRSxPQUFPQyxhQUFhQyxnQkFBa0IsU0FBVUMsRUFBT0MsR0FLMUQsSUFGQSxJQUVTQyxFQUFJLEVBQUdBLEVBQUlGLEVBQU1HLE9BQVFELElBQUssQ0FFbkMsSUFDSUUsRUFEYVgsRUFBS0wsUUFBUWlCLElBQUksUUFBVUMsS0FBS0MsU0FBU0MsU0FBUyxJQUFJQyxPQUFPLElBQ3hEQyxJQUFJVixFQUFNRSxJQUVoQ0UsRUFBS08sR0FBRyxnQkFBaUIsU0FBVUMsS0FFaEMsU0FBVUMsR0FDVGxCLE9BQU9tQixXQUFXQyxVQUFVRixFQUFNRyxPQUVuQyxXQUdDWixFQUFLUSxTQUFTUCxJQUFJWSxpQkFBaUJDLEtBQUssU0FBVUMsR0FDOUNsQixFQUFPa0IsU0FZdkJ4QixPQUFPRSxPQUFPdUIsVUFJbEJsQyxLQUFLSyxVQUFVOEIsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBR2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHdEIsTUFBTSxHQUMxQjBCLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBUUgsR0FDeEJJLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDVGIsRUFBRSxtQkFDUmMsSUFBSU4sVUFPdkM3QyxLQUFLSyxVQUFVK0MsdUJBQXlCLFdBQ3BDLElBQUk3QyxFQUFPTixLQUNQbUMsRUFBWUMsRUFBRSxrQkFDbEJELEVBQVVFLE9BQU8sV0FHYixJQUFJQyxFQUFPSCxFQUFVLEdBQUd0QixNQUFNLEdBRTFCSSxFQURhWCxFQUFLTCxRQUFRaUIsSUFBSSxRQUFVb0IsRUFBS2MsTUFDM0I3QixJQUFJZSxHQUNOaEMsRUFBSytDLGNBQ1hDLE9BQ2QsSUFBSUMsRUFBY25CLEVBQUUsaUJBQ3BCbUIsRUFBWUMsSUFBSSxDQUFDQyxNQUFTLE9BQzFCRixFQUFZRyxLQUFLLEtBQ2pCekMsRUFBS08sR0FBRyxnQkFBaUIsU0FBVUMsR0FDL0IsSUFFSWtDLEdBRldsQyxFQUFTbUMsaUJBQW1CbkMsRUFBU29DLFdBQWMsS0FFeENDLFFBQVEsR0FBSyxJQUV2Q1AsRUFBWUMsSUFBSSxDQUFDQyxNQUFTRSxJQUMxQkosRUFBWUcsS0FBS0MsSUFDbEIsU0FBVWpDLEdBQ1RsQixPQUFPbUIsV0FBV0MsVUFBVUYsRUFBTUcsT0FFbkMsV0FHQ1osRUFBS1EsU0FBU1AsSUFBSVksaUJBQWlCQyxLQUFLLFNBQVVDLEdBQzFCSSxFQUFFLG1CQUNSMkIsT0FDTzNCLEVBQUUsbUJBQ1JjLElBQUlsQixHQUNuQmdDLFFBQVFDLElBQUlqQyxVQVE1QmpDLEtBQUtLLFVBQVU4RCxrQkFBb0IsV0FDZjlCLEVBQUUsZUFDUitCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQUlDLEVBQVFsQyxFQUFFLHVCQUF1QmMsTUFDakNxQixFQUFXbkMsRUFBRSwyQkFBMkJjLE1BQ3hDc0IsRUFBT3BDLEVBQUUsc0JBQXNCYyxNQUMvQnVCLEVBQVlyQyxFQUFFLDJCQUEyQmMsTUFDekN3QixFQUFVbEUsT0FBT0UsT0FBT2lFLElBQUlDLE9BQ2hDbEMsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG1CQUNQQyxLQUFRLENBQ0p5QixNQUFTQSxFQUNUQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxRQUFXQSxHQUVmMUIsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2I0QixTQUFTQyxhQUFhLFNBQVUsV0FDNUJ0RSxPQUFPdUUsU0FBU0MsaUJBU3hDakYsS0FBS0ssVUFBVTZFLElBQU0sV0FDakJqRixLQUFLbUQseUJBQ0xuRCxLQUFLSyxhQUNMTCxLQUFLa0UscUJBRVQ5QixFQUFFOEMsVUFBVUMsTUFBTSxXQUdkLElBQUlDLEVBQU8sSUFBSXJGLEtBQ2ZxRixFQUFLL0IsY0FBZ0JqQixFQUFFLG1CQUN2QmdELEVBQUtIIiwiZmlsZSI6IndyaXRlX25ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGZpcmViYXNlQ29uZmlnID0ge1xyXG4gICAgYXBpS2V5OiBcIkFJemFTeUI1d0cxemtXbHhwYUwzT2ZzMUFXa0R2alhlaFFJcF9tSVwiLFxyXG4gICAgYXV0aERvbWFpbjogXCJ4ZnoxLTMyY2NjLmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly94ZnoxLTMyY2NjLmZpcmViYXNlaW8uY29tXCIsXHJcbiAgICBwcm9qZWN0SWQ6IFwieGZ6MS0zMmNjY1wiLFxyXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJ4ZnoxLTMyY2NjLmFwcHNwb3QuY29tXCIsXHJcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogXCI1MDE0Mzc2OTc2MDRcIixcclxuICAgIGFwcElkOiBcIjE6NTAxNDM3Njk3NjA0OndlYjo1N2U0NDNkM2VlZjJkNmQxXCJcclxufTtcclxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxyXG5maXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuXHJcblxyXG5mdW5jdGlvbiBOZXdzKCkge1xyXG4gICAgdGhpcy5zdG9yYWdlID0gZmlyZWJhc2Uuc3RvcmFnZSgpO1xyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5pbml0VWRpdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICB2YXIgRSA9IHdpbmRvdy53YW5nRWRpdG9yXHJcbiAgICB3aW5kb3cuZWRpdG9yID0gbmV3IEUoJyNlZGl0b3InKVxyXG4gICAgLy8g5oiW6ICFIHZhciBlZGl0b3IgPSBuZXcgRSggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRvcicpIClcclxuICAgIHdpbmRvdy5lZGl0b3IuY3VzdG9tQ29uZmlnLmN1c3RvbVVwbG9hZEltZyA9IGZ1bmN0aW9uIChmaWxlcywgaW5zZXJ0KSB7XHJcbiAgICAgICAgLy8gZmlsZXMg5pivIGlucHV0IOS4remAieS4reeahOaWh+S7tuWIl+ihqFxyXG4gICAgICAgIC8vIGluc2VydCDmmK/ojrflj5blm77niYcgdXJsIOWQju+8jOaPkuWFpeWIsOe8lui+keWZqOeahOaWueazlVxyXG4gICAgICAgIHZhciBhcnIgPSBbXVxyXG4gICAgICAgIC8vIOS4iuS8oOS7o+eggei/lOWbnue7k+aenOS5i+WQju+8jOWwhuWbvueJh+aPkuWFpeWIsOe8lui+keWZqOS4rVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlUmVmID0gc2VsZi5zdG9yYWdlLnJlZignbmV3cy8nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpKVxyXG4gICAgICAgICAgICB2YXIgdGFzayA9IHN0b3JhZ2VSZWYucHV0KGZpbGVzW2ldKVxyXG5cclxuICAgICAgICAgICAgdGFzay5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoZXJyb3IuY29kZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgdW5zdWNjZXNzZnVsIHVwbG9hZHNcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHN1Y2Nlc3NmdWwgdXBsb2FkcyBvbiBjb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgLy8gRm9yIGluc3RhbmNlLCBnZXQgdGhlIGRvd25sb2FkIFVSTDogaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vLi4uXHJcbiAgICAgICAgICAgICAgICB0YXNrLnNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKGRvd25sb2FkVVJMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KGRvd25sb2FkVVJMKVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB3aW5kb3cuZWRpdG9yLmNyZWF0ZSgpXHJcbn1cclxuXHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vbGFiZWwgaWTlj6/mi7/kuIDntYTmnbHopb8s56ysMOWAi+aYr2ZpbGUgaW5wdXRcclxuICAgICAgICAvL2ZpbGUgaW5wdXTlj6/lgrPlhaXlpJrlgIvmlofku7Ys5pys5qyh5Y+q5ou/56ys5LiA5YCLXHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF1cclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKS8v5q2k6JmV5ZCN5a2X6KaB5ZKM5b6M5Y+w5LiA6Ie0XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJCgnI3RodW1ibmFpbC1mb3JtJylcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudDIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vbGFiZWwgaWTlj6/mi7/kuIDntYTmnbHopb8s56ysMOWAi+aYr2ZpbGUgaW5wdXRcclxuICAgICAgICAvL2ZpbGUgaW5wdXTlj6/lgrPlhaXlpJrlgIvmlofku7Ys5pys5qyh5Y+q5ou/56ys5LiA5YCLXHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF1cclxuICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IHNlbGYuc3RvcmFnZS5yZWYoJ25ld3MvJyArIGZpbGUubmFtZSlcclxuICAgICAgICB2YXIgdGFzayA9IHN0b3JhZ2VSZWYucHV0KGZpbGUpXHJcbiAgICAgICAgdmFyIHByb2dyZXNzR3JvdXAgPSBzZWxmLnByb2dyZXNzR3JvdXBcclxuICAgICAgICBwcm9ncmVzc0dyb3VwLnNob3coKVxyXG4gICAgICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpXHJcbiAgICAgICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6ICcwJSd9KVxyXG4gICAgICAgIHByb2dyZXNzQmFyLnRleHQoJzAnKVxyXG4gICAgICAgIHRhc2sub24oJ3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSAoc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMpICogMTAwO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnVXBsb2FkIGlzICcgKyBwZXJjZW50ICsgJyUgZG9uZScpO1xyXG4gICAgICAgICAgICB2YXIgcGVyY2VudFRleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyAnJSdcclxuXHJcbiAgICAgICAgICAgIHByb2dyZXNzQmFyLmNzcyh7XCJ3aWR0aFwiOiBwZXJjZW50VGV4dH0pXHJcbiAgICAgICAgICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihlcnJvci5jb2RlKTtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIHVuc3VjY2Vzc2Z1bCB1cGxvYWRzXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgc3VjY2Vzc2Z1bCB1cGxvYWRzIG9uIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIC8vIEZvciBpbnN0YW5jZSwgZ2V0IHRoZSBkb3dubG9hZCBVUkw6IGh0dHBzOi8vZmlyZWJhc2VzdG9yYWdlLmdvb2dsZWFwaXMuY29tLy4uLlxyXG4gICAgICAgICAgICB0YXNrLnNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKGRvd25sb2FkVVJMKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJCgnI3RodW1ibmFpbC1mb3JtJylcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbChkb3dubG9hZFVSTClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvd25sb2FkVVJMKVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJChcIiNzdWJtaXQtYnRuXCIpXHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKClcclxuICAgICAgICB2YXIgY29udGVudCA9IHdpbmRvdy5lZGl0b3IudHh0Lmh0bWwoKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy93cml0ZV9uZXdzLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn5paw6IGe55m85L2I5oiQ5YqfJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5VcGxvYWRGaWxlRXZlbnQyKCk7XHJcbiAgICB0aGlzLmluaXRVZGl0b3IoKTtcclxuICAgIHRoaXMubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufVxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgLy8gR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBzdG9yYWdlIHNlcnZpY2UsIHdoaWNoIGlzIHVzZWQgdG8gY3JlYXRlIHJlZmVyZW5jZXMgaW4geW91ciBzdG9yYWdlIGJ1Y2tldFxyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpXHJcbiAgICBuZXdzLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxuICAgIG5ld3MucnVuKClcclxufSlcclxuXHJcbiJdfQ==
