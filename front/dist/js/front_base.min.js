function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper"),this.smsCaptcha=$(".sms-captcha-btn")}function FrontBase(){}Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信驗證碼發送成功"),t.smsCaptcha.addClass("disabled");var n=60;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("發送驗證碼"),t.listenSmsCapthaEvent())},1e3)},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:"0"})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:"-400px"})}),a.click(function(){$(".mask-wrapper").hide()})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){200===t.code&&(a.hideEvent(),window.location.reload())}})})},Auth.prototype.listenSmsCapthaEvent=function(){var n=this,e=$(".signup-group input[name='telephone']");n.smsCaptcha.click(function(){var t=e.val();console.log(t),""!==t?xfzajax.get({url:"account/sms_captcha/",data:{telephone:t},success:function(t){200===t.code&&n.smsSuccessEvent()}}):messageBox.showInfo("請輸入手機號碼")})},Auth.prototype.listenSignupEvent=function(){var m=$(".signup-group");m.find(".submit-btn").click(function(t){t.preventDefault();var n=m.find("input[name='telephone']"),e=m.find("input[name='username']"),a=m.find("input[name='img_captcha']"),s=m.find("input[name='password1']"),i=m.find("input[name='password2']"),o=m.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=a.val();console.log(p);var l=s.val(),u=i.val(),h=o.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:l,password2:u,sms_captcha:h},success:function(t){200===t.code&&window.location.reload()}})})},Auth.prototype.run=function(){this.listenShowHideEvent(),this.listenSwitchEvent(),this.listenSigninEvent(),this.listenSignupEvent(),this.listenImgCaptchaEvent(),this.listenSmsCapthaEvent()},$(document).ready(function(){(new Auth).run()}),FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.listenOptionClick()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.listenOptionClick=function(){$(".nav li a").each(function(){$this=$(this),$this[0].href===String(window.location)&&($(".nav li").removeClass("active"),$this.parent().addClass("active"))}),$(".nav li").click(function(){$(this).addClass("active").siblings().removeClass("active")})},$(document).ready(function(){(new FrontBase).run(),window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime();console.log(e);var a=((new Date).getTime()-e)/1e3;return a<60?"剛剛":60<a&&a<3600?parseInt(a/60)+"分鐘前":3600<=a&&a<86400?parseInt(a/60/60)+"小時前":86400<=a&&a<2592e3?parseInt(a/60/60/24)+"天前":n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwic21zQ2FwdGNoYSIsIkZyb250QmFzZSIsInByb3RvdHlwZSIsInNob3dFdmVudCIsInNob3ciLCJoaWRlRXZlbnQiLCJoaWRlIiwic21zU3VjY2Vzc0V2ZW50Iiwic2VsZiIsIm1lc3NhZ2VCb3giLCJzaG93U3VjY2VzcyIsImFkZENsYXNzIiwiY291bnQiLCJ1bmJpbmQiLCJ0aW1lciIsInNldEludGVydmFsIiwidGV4dCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVDbGFzcyIsImxpc3RlblNtc0NhcHRoYUV2ZW50IiwibGlzdGVuU2hvd0hpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwibGlzdGVuSW1nQ2FwdGNoYUV2ZW50IiwiaW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwibGlzdGVuU3dpdGNoRXZlbnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImxpc3RlblNpZ25pbkV2ZW50Iiwic2lnbmluR3JvdXAiLCJ0ZWxlcGhvbmVJbnB1dCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiY29uc29sZSIsImxvZyIsImdldCIsInNob3dJbmZvIiwibGlzdGVuU2lnbnVwRXZlbnQiLCJzaWdudXBHcm91cCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZUlucHV0IiwiaW1nQ2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInNtc0NhcHRjaGFJbnB1dCIsInVzZXJuYW1lIiwiaW1nX2NhcHRjaGEiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJzbXNfY2FwdGNoYSIsInJ1biIsImRvY3VtZW50IiwicmVhZHkiLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJsaXN0ZW5PcHRpb25DbGljayIsImF1dGhCb3giLCJ1c2VyTW9yZUJveCIsImhvdmVyIiwiZWFjaCIsIiR0aGlzIiwiaHJlZiIsIlN0cmluZyIsInBhcmVudCIsInNpYmxpbmdzIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIl0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxPQUNMQyxLQUFLQyxZQUFjQyxFQUFFLGlCQUNyQkYsS0FBS0csY0FBZ0JELEVBQUUsbUJBQ3ZCRixLQUFLSSxXQUFhRixFQUFFLG9CQWdNeEIsU0FBU0csYUE3TFROLEtBQUtPLFVBQVVDLFVBQVksV0FDdkJQLEtBQUtDLFlBQVlPLFFBR3JCVCxLQUFLTyxVQUFVRyxVQUFZLFdBQ3ZCVCxLQUFLQyxZQUFZUyxRQUdyQlgsS0FBS08sVUFBVUssZ0JBQWtCLFdBRTdCLElBQUlDLEVBQU9aLEtBQ1hhLFdBQVdDLFlBQVksYUFDdkJGLEVBQUtSLFdBQVdXLFNBQVMsWUFDekIsSUFBSUMsRUFBUSxHQUNaSixFQUFLUixXQUFXYSxPQUFPLFNBQ3ZCLElBQUlDLEVBQVFDLFlBQVksV0FDcEJQLEVBQUtSLFdBQVdnQixLQUFLSixFQUFRLE1BQzdCQSxHQUFTLElBQ0ksSUFDVEssY0FBY0gsR0FDZE4sRUFBS1IsV0FBV2tCLFlBQVksWUFDNUJWLEVBQUtSLFdBQVdnQixLQUFLLFNBQ3JCUixFQUFLVyx5QkFFVixNQUlQeEIsS0FBS08sVUFBVWtCLG9CQUFzQixXQUNqQyxJ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LE1BQ0ssT0FBYkEsR0FBNkJBLEVBQVksT0FDckMvRCxTQUFTK0QsRUFBWSxHQUFLLEdBQUssSUFDNUIsS0FFSEosRUFBS0ssY0FLRixJQUpGTCxFQUFLTSxXQUlXLElBSGxCTixFQUFLTyxTQUd5QixJQUY3QlAsRUFBS1EsV0FFcUMsSUFEeENSLEVBQUtTIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy/pu57mk4rnmbvpjITmjInpiJUs5b2I5Ye65qih5oWL5bCN6Kmx5qGGXHJcbi8v6JmV55CG55m76YyE5ZKM5rOo5YaKXHJcbmZ1bmN0aW9uIEF1dGgoKSB7XHJcbiAgICB0aGlzLm1hc2tXcmFwcGVyID0gJChcIi5tYXNrLXdyYXBwZXJcIik7XHJcbiAgICB0aGlzLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9sbC13cmFwcGVyXCIpO1xyXG4gICAgdGhpcy5zbXNDYXB0Y2hhID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLm1hc2tXcmFwcGVyLnNob3coKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6HpqZforYnnorznmbzpgIHmiJDlip8nKVxyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLmFkZENsYXNzKCdkaXNhYmxlZCcpXHJcbiAgICB2YXIgY291bnQgPSA2MFxyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKVxyXG4gICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KGNvdW50ICsgJ3MnKVxyXG4gICAgICAgIGNvdW50IC09IDFcclxuICAgICAgICBpZiAoY291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKVxyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJylcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoJ+eZvOmAgempl+itieeivCcpXHJcbiAgICAgICAgICAgIHNlbGYubGlzdGVuU21zQ2FwdGhhRXZlbnQoKVxyXG4gICAgICAgIH1cclxuICAgIH0sIDEwMDApXHJcbn1cclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoXCIuc2lnbmluLWJ0blwiKTtcclxuICAgIHZhciBzaWdudXBCdG4gPSAkKFwiLnNpZ251cC1idG5cIik7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKFwiLmNsb3NlLWJ0blwiKTtcclxuXHJcblxyXG4gICAgc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiBcIjBcIn0pXHJcbiAgICB9KVxyXG4gICAgc2lnbnVwQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiBcIi00MDBweFwifSlcclxuICAgIH0pXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5tYXNrLXdyYXBwZXJcIikuaGlkZSgpO1xyXG4gICAgfSlcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKFwiLmltZy1jYXB0Y2hhXCIpO1xyXG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/mlLnororlnJbniYfnmoToq4vmsYLlnLDlnYAs54CP6Ka95Zmo5pyD6YeN5paw55m86YCB6KuL5rGCXHJcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsIFwiL2FjY291bnQvaW1nX2NhcHRjaGEvXCIgKyBcIj9yYW5kb209XCIgKyBNYXRoLnJhbmRvbSgpKVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XHJcbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7Ly/pu57mk4rliIfmj5vnmbvpjIQv5rOo5YaK55qE6aCB6Z2iXHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xyXG4gICAgICAgIGlmIChjdXJyZW50TGVmdCA8IDApIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIjBcIn0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIi00MDBweFwifSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKCcuc2lnbmluLWdyb3VwJyk7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgdmFyIHJlbWVtYmVySW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKTtcclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKClcclxuICAgICAgICB2YXIgcmVtZW1iZXIgPSByZW1lbWJlcklucHV0LnByb3AoXCJjaGVja2VkXCIpXHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlciA/IDEgOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TbXNDYXB0aGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG5cclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpXHJcbiAgICBzZWxmLnNtc0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRlbGVwaG9uZSlcclxuICAgICAgICBpZiAodGVsZXBob25lID09PSAnJykge1xyXG4gICAgICAgICAgICBtZXNzYWdlQm94LnNob3dJbmZvKCfoq4vovLjlhaXmiYvmqZ/omZ/norwnKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJ2FjY291bnQvc21zX2NhcHRjaGEvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7J3RlbGVwaG9uZSc6IHRlbGVwaG9uZX0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pXHJcbn1cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKVxyXG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIilcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIilcclxuICAgICAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIilcclxuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIilcclxuICAgICAgICB2YXIgc21zQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIilcclxuXHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpXHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGltZ19jYXB0Y2hhKVxyXG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKVxyXG5cclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOiBwYXNzd29yZDIsXHJcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdGVuU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5Td2l0Y2hFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5TaWduaW5FdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5TaWdudXBFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU21zQ2FwdGhhRXZlbnQoKTtcclxuXHJcbn1cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcclxuICAgIGF1dGgucnVuKCk7XHJcbn0pXHJcblxyXG5cclxuLy/omZXnkIblsI7oiKrmop1cclxuXHJcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxuXHJcbn1cclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5BdXRoQm94SG92ZXIoKVxyXG4gICAgdGhpcy5saXN0ZW5PcHRpb25DbGljaygpXHJcbn1cclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuQXV0aEJveEhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGhCb3ggPSAkKFwiLmF1dGgtYm94XCIpXHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIilcclxuICAgIGF1dGhCb3guaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHVzZXJNb3JlQm94LnNob3coKVxyXG4gICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKVxyXG4gICAgfSlcclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5PcHRpb25DbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIubmF2IGxpIGFcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmICgkdGhpc1swXS5ocmVmID09PSBTdHJpbmcod2luZG93LmxvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICAkKFwiLm5hdiBsaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgJHRoaXMucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7ICAvL2FjdGl2ZeihqOekuuiiq+mAieS4reaViOaenOeahOexu+WQjVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIubmF2IGxpXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpXHJcblxyXG4gICAgZnJvbnRCYXNlLnJ1bigpXHJcbiAgICBpZiAod2luZG93LnRlbXBsYXRlKSB7XHJcbiAgICAgICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKVxyXG4gICAgICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCkvL+aLv+WIsOaWh+eroOeZvOS9iOaZgumWk+eahOS6s+enklxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRldHMpXHJcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkvL+aLv+WIsOePvuWcqOaZgumWk+eahOS6s+enklxyXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKSAvIDEwMDAvL+S6s+enkui9ieenklxyXG4gICAgICAgICAgICBpZiAodGltZXN0YW1wIDwgNjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAn5Ymb5YmbJ1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+IDYwICYmIHRpbWVzdGFtcCA8IDYwICogNjApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWludXRlcyArICfliIbpkJjliY0nXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/mmYLliY0nXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgKiAyNCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQgKiAzMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwIC8gMjQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJ1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKClcclxuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpXHJcbiAgICAgICAgICAgICAgICB2YXIgaG91ciA9IGRhdGUuZ2V0SG91cnMoKVxyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geWVhciArICcvJyArIG1vbnRoICsgJy8nICsgZGF5ICsgXCIgXCIgKyBob3VyICsgXCI6XCIgKyBtaW51dGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkiXX0=
