function Banners(){}Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this,e=$(".banner-list-group"),a=$("#add-banner-btn"),t=0;a.click(function(){t=e.children().length,console.log(t),6<t?window.messageBox.showInfo("最多只能添加6張輪播圖"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"確認刪除此輪播圖?",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("輪播圖刪除成功"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find("span[class='priority']"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(s.text("優先級: "+e),c?window.messageBox.showSuccess("輪播圖修改成功"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("輪播圖新增成功")))}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(document).ready(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxvYWREYXRhIiwic2VsZiIsInRoaXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwiYmFubmVyIiwiY3JlYXRlQmFubmVySXRlbSIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwiJCIsImJhbm5lckl0ZW0iLCJhcHBlbmQiLCJmaW5kIiwicHJlcGVuZCIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImFkZFNhdmVCYW5uZXJFdmVudCIsImxpc3RlbkFkZEJhbm5lckV2ZW50IiwiYWRkQnRuIiwiY2xpY2siLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJpbWFnZSIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwicG9zdCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiYXR0ciIsImJhbm5lcklkIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiYmFubmVyX2lkIiwicmVtb3ZlIiwic2hvd1N1Y2Nlc3MiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmt0b1RhZyIsInByaW9yaXR5U3BhbiIsImltYWdlX3VybCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsInBrIiwicnVuIiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsV0FLVEEsUUFBUUMsVUFBVUMsU0FBVyxXQUN6QixJQUFJQyxFQUFPQyxLQUNYQyxRQUFRQyxJQUFJLENBQ1JDLElBQU8sb0JBQ1BDLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFB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QWEsS0FBYSxVQUNyQ1UsRUFBVzJCLEtBQUssaUJBQWtCQyxHQUVsQ2YsT0FBT0MsV0FBV3FCLFlBQVksbUJBYTFEdEQsUUFBUUMsVUFBVWdFLElBQU0sV0FDcEI3RCxLQUFLc0IsdUJBQ0x0QixLQUFLRixZQUlUZ0IsRUFBRWdELFVBQVVDLE1BQU0sWUFDQSxJQUFJbkUsU0FDVmlFIiwiZmlsZSI6ImJhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQmFubmVycygpIHtcclxuXHJcbn1cclxuXHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9iYW5uZXJfbGlzdC8nLFxyXG4gICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYW5uZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV1cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oYmFubmVyKVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0ZW0gPSBmdW5jdGlvbiAoYmFubmVyKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIsIHtcImJhbm5lclwiOiBiYW5uZXJ9KVxyXG4gICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoXCIuYmFubmVyLWxpc3QtZ3JvdXBcIilcclxuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbFxyXG4gICAgaWYgKGJhbm5lcikge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5hcHBlbmQodHBsKVxyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZChcIi5iYW5uZXItaXRlbTpsYXN0XCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbClcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06Zmlyc3RcIilcclxuICAgIH1cclxuXHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSlcclxuICAgIHNlbGYuYWRkUmVtb3ZlQmFubmVyRXZlbnQoYmFubmVySXRlbSlcclxuICAgIHNlbGYuYWRkU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pXHJcbn1cclxuXHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKVxyXG4gICAgdmFyIGFkZEJ0biA9ICQoXCIjYWRkLWJhbm5lci1idG5cIilcclxuICAgIHZhciBsZW5ndGggPSAwXHJcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxlbmd0aCA9IGJhbm5lckxpc3RHcm91cC5jaGlsZHJlbigpLmxlbmd0aFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGxlbmd0aClcclxuICAgICAgICBpZiAobGVuZ3RoID42KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKCfmnIDlpJrlj6rog73mt7vliqA25by16Lyq5pKt5ZyWJylcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpXHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKVxyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoJy5pbWFnZS1pbnB1dCcpXHJcbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpXHJcbiAgICB9KVxyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXVxyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuYXR0cihcInNyY1wiLCB1cmwpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZFJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpXHJcblxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKVxyXG4gICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiAn56K66KqN5Yiq6Zmk5q2k6Lyq5pKt5ZyWPycsXHJcbiAgICAgICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9kZWxldGVfYmFubmVyLycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Jhbm5lcl9pZCc6IGJhbm5lcklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i8quaSreWcluWIqumZpOaIkOWKnycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pXHJcblxyXG5cclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKVxyXG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJylcclxuICAgIHZhciBwcmlvcml0eVRhZyA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J3ByaW9yaXR5J11cIilcclxuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIilcclxuICAgIHZhciBwcmlvcml0eVNwYW4gPSBiYW5uZXJJdGVtLmZpbmQoXCJzcGFuW2NsYXNzPSdwcmlvcml0eSddXCIpXHJcbiAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoXCJkYXRhLWJhbm5lci1pZFwiKVxyXG4gICAgdmFyIHVybCA9ICcnXHJcbiAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X2Jhbm5lci8nXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXIvJ1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpXHJcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKClcclxuICAgICAgICB2YXIgbGlua190byA9IGxpbmt0b1RhZy52YWwoKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICAgICAncHJpb3JpdHknOiBwcmlvcml0eSxcclxuICAgICAgICAgICAgICAgICAgICAnbGlua190byc6IGxpbmtfdG8sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVNwYW4udGV4dChcIuWEquWFiOe0mjogXCIgKyBwcmlvcml0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui8quaSreWcluS/ruaUueaIkOWKn1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbJ2RhdGEnXVsnYmFubmVyX2lkJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnLCBiYW5uZXJJZClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui8quaSreWcluaWsOWinuaIkOWKn1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdGVuQWRkQmFubmVyRXZlbnQoKVxyXG4gICAgdGhpcy5sb2FkRGF0YSgpXHJcblxyXG59XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVycyA9IG5ldyBCYW5uZXJzKClcclxuICAgIGJhbm5lcnMucnVuKClcclxufSkiXX0=
